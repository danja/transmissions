@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

@prefix trn: <http://purl.org/stuff/transmissions/> . # TODO make plural
@prefix : <http://purl.org/stuff/transmissions/> . # for custom terms & instances - TODO make one @services s:
@prefix trn: <http://purl.org/stuff/transmissions/> .

#############################################################
# insert into pipe for debugging - one instance only like this
:DE a :DeadEnd . # ends the current pipe quietly
:H  a :Halt . # kills everything
:SC a :ShowConfig . # verbose report, continues pipe
:SM a :ShowMessage . # verbose report, continues pipe
:N  a :NOP . # no operation (except for showing stage in pipe)
:UF a :Unfork . # collapses all pipes but one
:ST a :ShowTransmission .
#############################################################


## ###############################################################

:render2 a trn:Transmission ;
    rdfs:label "render2" ;
    rdfs:comment "template entry html to pages" ;
   trn:pipe (:r210  :r220 :r230  :r240 :r250 :r260
             :r300 :r310 :r320 :r330 :r340 :r350 :r360) .

:r210 a :DirWalker ; # automatically forks
    trn:config :cacheWalker .

:r220 a :FileReader . # the markdown content

:r230 a :Restructure ; # moves content into  contentBlocks
   trn:config :templatePrep .

:r240 a :Templater ; # for individual post pages
    trn:configKey :pTemplater . ###########################################################################
######### configKey -> settings <ConfigSet>
:r250 a :Restructure ; # moves content into  contentBlocks
   trn:config :writePrep . # CONFIGKEY?

:r260 a :FileWriter ;
    trn:config :fileWriter .


####################### index.html
:r300  a :Unfork .

:r310 a :FrontPagePrep .

:r320 a :Templater ;
    trn:config :indexTemplater .

:r330 a :FileWriter .

###################### index.xml

:r340 a :AtomFeedPrep .

:r350 a :Templater .
 #   trn:configKey :atomTemplate .

:r360 a :FileWriter .
