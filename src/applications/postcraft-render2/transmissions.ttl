@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

@prefix trm: <http://purl.org/stuff/transmission/> . # TODO make plural
@prefix : <http://hyperdata.it/transmissions/> . # for custom terms & instances - TODO make one @services s:
@prefix pc: <http://purl.org/stuff/postcraft/> .

#############################################################
# insert into pipe for debugging - one instance only like this
:DE a :DeadEnd . # ends the current pipe quietly
:H  a :Halt . # kills everything
:SC a :ShowConfig . # verbose report, continues pipe
:SM a :ShowMessage . # verbose report, continues pipe
:N  a :NOP . # no operation (except for showing stage in pipe)
:UF a :Unfork . # collapses all pipes but one
#############################################################


## ###############################################################

:render2 a trm:Transmission ;
    rdfs:label "render2" ;
    rdfs:comment "template entry html to pages" ;
   trm:pipe (:r210 :r220 :r230 :r240 :r250 :r260
     :N   :DE  :s150 :s160 :s170 :s180 :s190 :s200 :s210 ) .

:r210 a :DirWalker ; # automatically forks
    trm:config :cacheWalker .

:r220 a :FileReader . # the markdown content

:r230 a :Restructure ; # moves content into  contentBlocks
   trm:configKey :templatePrep .

:r240 a :Templater ; # for individual post pages
    trm:config :pageTemplater .

:r250 a :Restructure ; # moves content into  contentBlocks
   trm:configKey :writePrep .

:r260 a :FileWriter ;
    trm:config :fileWriter .

####################### index.html
:s150  a :Unfork .

:s160 a :FrontPagePrep .

:s170 a :Templater .

:s180 a :FileWriter .

###################### index.xml

:s190 a :AtomFeedPrep .

:s200 a :Templater .
 #   trm:configKey :atomTemplate .

:s210 a :FileWriter .
